## 对话记录

> - 人类意图对齐部分应该单独开一个小节
> 每次改动前先阅读：- `AGENTS.md`
> - `docs/architecture/repository-structure.md`
> 关于这个，我有一些疑问，因为我们的MCP工具支持到达叶子节点，我的意思是，不一定阅读`repository-structure.md`了，而是直接MCP 阅读指定层级的模块说明

**LLM**: 已将“人类意图对齐”拆分为独立小节，并把改动前架构阅读策略调整为“优先 MCP 定向读取叶子节点，`repository-structure.md` 作为兜底”。

**修改时间**: 2026-02-07 15:03:14

## 概述

将需求对齐流程显式化，并引入 MCP 优先的按需阅读策略，减少无效上下文加载，提升变更决策效率。

## 修改文件清单

| 文件 | 操作 | 修改时间 | 说明 |
|------|------|----------|------|
| `AGENTS.md` | 修改 | 2026-02-07 15:02:30 | 新增 `Human Intent Alignment` 小节；改为 MCP 优先读取架构上下文 |
| `AGENTS.zh-CN.md` | 修改 | 2026-02-07 15:02:40 | 中文审核版同步新增“人类意图对齐”与 MCP 优先策略 |
| `docs/dev_logs/2026-02-07/19-intent-alignment-and-mcp-read-strategy.md` | 新增 | 2026-02-07 15:03:14 | 记录本轮规范调整与验证结果 |

## 具体变更描述

### 问题

- 规则中“意图对齐”与“预检查”混在一起，不够醒目，执行时容易遗漏。
- 强制阅读 `repository-structure.md` 与现有 MCP 能力（可到叶子节点）存在效率冲突。

### 方案

1. 将“人类意图对齐”独立成单独章节
- 明确要求先与用户对齐：改哪些文件、怎么做、影响和风险，再开始改动。

2. 调整架构上下文读取策略
- 强制先读 `AGENTS.md`。
- 架构信息优先通过 MCP 对目标模块/叶子节点做按需读取。
- 仅在范围不清、MCP 不可用或跨模块评估时，才阅读 `docs/architecture/repository-structure.md`。

### 影响范围

- 业务收益：减少文档全量阅读成本，加快需求到执行的响应速度。
- 管理收益：意图对齐检查点更清晰，降低误改风险。
- 风险：仅规范文档调整，不影响业务代码与运行时行为。

## 验证结果

- ✔ `bash scripts/check_errors.sh` 通过（依赖检查 / TypeScript / ESLint / Vite Build 全通过）
