{
  "generatedAt": "2026-02-07T20:54:27.538Z",
  "target": "web/src/features/knowledge",
  "policyPath": ".agents/skills/modularization-governance/references/modularity-policy.template.json",
  "thresholds": {
    "maxFileLines": 260,
    "maxFanOut": 12,
    "maxRelativeImportDepth": 3,
    "maxPublicExports": 25,
    "maxOrphanFiles": 0,
    "maxUnknownLayerFiles": 0,
    "maxReverseLayerImports": 0,
    "maxCircularDeps": 0
  },
  "summary": {
    "status": "REFINE",
    "blockCount": 0,
    "refineCount": 3,
    "metrics": {
      "totalFiles": 19,
      "totalImports": 50,
      "externalImports": 16,
      "circularDeps": 0,
      "reverseLayerImports": 0,
      "deepRelativeImports": 0,
      "orphanFiles": 0,
      "unknownLayerFiles": 4,
      "oversizedFiles": 1,
      "highFanOutFiles": 1
    }
  },
  "findings": [
    {
      "severity": "REFINE",
      "code": "FILE_TOO_LARGE",
      "message": "KnowledgeGraphFeature.tsx 行数 328 超过阈值 260",
      "files": [
        "KnowledgeGraphFeature.tsx"
      ],
      "suggestion": "拆分为更小职责单元（先抽纯逻辑，再拆状态与视图）。",
      "evidence": {
        "lineCount": 328,
        "threshold": 260
      }
    },
    {
      "severity": "REFINE",
      "code": "HIGH_FAN_OUT",
      "message": "KnowledgeGraphFeature.tsx 依赖数 14 超过阈值 12",
      "files": [
        "KnowledgeGraphFeature.tsx"
      ],
      "suggestion": "收敛外部依赖到 facade/adapter，避免单文件扇出过大。",
      "evidence": {
        "importCount": 14,
        "threshold": 12
      }
    },
    {
      "severity": "REFINE",
      "code": "UNKNOWN_LAYER_FILES",
      "message": "未归层文件数 4 超过阈值 0",
      "files": [
        "KnowledgeGraphFeature.tsx",
        "constants.ts",
        "index.ts",
        "types.ts"
      ],
      "suggestion": "将文件移动到已定义层目录，或扩展 layerOrder。",
      "evidence": {
        "unknownLayerFiles": 4,
        "threshold": 0
      }
    }
  ]
}
