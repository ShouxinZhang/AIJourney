## 对话记录

> ![1770442483846](image/vc-as-scripts/1770442483846.png)
> 分析一下这个UI视图，你不觉得很好笑吗？
> 
> 此外， git save一下

**LLM**: 已完成一次 `git save` 提交保护现场，并给出 UI 问题诊断：主阅读区空白、信息重心错位、右侧过载导致可读性下降。

> YES

**LLM**: 按确认方案完成布局重构：叶子节点时中间面板切换为 Markdown 主阅读区，右侧改为元信息和影响分析。

**修改时间**: 2026-02-07 13:41:03

## 概述

将“叶子节点内容阅读”从右侧窄栏升级为中间主面板，避免核心内容被边栏淹没，提升知识审阅效率与产品可信度。

## 修改文件清单

| 文件 | 操作 | 修改时间 | 说明 |
|------|------|----------|------|
| `web/src/components/KnowledgeGraph.tsx` | 修改 | 2026-02-07 13:40:27 | 叶子节点时中间区域显示 Markdown 主阅读；右侧改为阅读状态+结构信息 |
| `web/src/index.css` | 修改 | 2026-02-07 13:39:36 | 新增 `.knowledge-markdown-article`，提升主阅读区字号与层级样式 |
| `docs/dev_logs/2026-02-07/11-leaf-center-markdown-layout.md` | 新增 | 2026-02-07 13:41:03 | 记录本轮布局重构和验证结果 |

## 具体变更描述

### 问题

- 中间主工作区在叶子节点场景为空白，用户会误判“系统无内容”。
- 在线阅读正文被放在右侧窄栏，导致阅读效率低，业务评审体验差。

### 方案

1. 中间面板角色重置
- 当选中叶子节点时，中间区域直接作为“在线文档主阅读区”，渲染 Markdown 正文。
- 当选中非叶子节点时，继续展示子节点目录卡片，保持导航能力。

2. 右侧面板职责收敛
- 移除正文显示，避免信息重复与拥挤。
- 保留节点名称、文档路径、阅读状态、影响规模、上游路径、直接依赖，聚焦管理和分析。

3. 阅读样式强化
- 为主阅读区增加 `knowledge-markdown-article` 样式，提升标题层级和正文可读性。

### 影响范围

- 用户价值：核心内容进入主视觉区，减少“空白页感”和误解。
- 业务价值：文档评审效率提升，更适合内容驱动场景的演示和决策。
- 技术价值：保留文件夹导航与依赖分析能力，不破坏现有信息架构。

## 验证结果

- ✔ `bash scripts/check_errors.sh` 通过（TypeScript / ESLint / Vite Build 全通过）
- ✔ `cd web && npm run test` 通过（6/6）
- ✔ `cd web && timeout 20s npm run dev -- --host 127.0.0.1 --port 4173` 启动成功
